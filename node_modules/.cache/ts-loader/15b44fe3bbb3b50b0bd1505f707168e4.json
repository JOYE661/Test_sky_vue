{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/ts-loader/index.js??ref--13-3!/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/views/dish/addDishtype.vue?vue&type=script&lang=ts","dependencies":[{"path":"/app/src/views/dish/addDishtype.vue","mtime":1692717650000},{"path":"/app/babel.config.js","mtime":1692717650000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1767081203604},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1767081197901},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1767081204095},{"path":"/app/node_modules/ts-loader/index.js","mtime":1767081197570},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1767081203604},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":1767081197097}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport _defineProperty from \"/app/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/app/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator.js\";\nimport _toConsumableArray from \"/app/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _classCallCheck from \"/app/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/app/node_modules/@babel/runtime-corejs2/helpers/esm/createClass.js\";\nimport _possibleConstructorReturn from \"/app/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/app/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/app/node_modules/@babel/runtime-corejs2/helpers/esm/inherits.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nimport { __decorate } from \"tslib\";\nimport { Component, Vue, Watch } from 'vue-property-decorator';\nimport HeadLable from '@/components/HeadLable/index.vue';\nimport SelectInput from \"./components/SelectInput.vue\";\nimport ImageUpload from '@/components/ImgUpload/index.vue';\n// getFlavorList口味列表暂时不做 getDishTypeList\nimport { queryDishById, addDish, editDish, getCategoryList } from '@/api/dish';\nimport { getToken } from '@/utils/cookies';\nvar default_1 = /*#__PURE__*/function (_Vue) {\n  function default_1() {\n    var _this;\n    _classCallCheck(this, default_1);\n    _this = _callSuper(this, default_1, arguments);\n    _this.restKey = 0;\n    _this.textarea = '';\n    _this.value = '';\n    _this.imageUrl = '';\n    _this.actionType = '';\n    _this.dishList = [];\n    _this.dishFlavorsData = []; //原始口味数据\n    _this.dishFlavors = []; //待上传口味的数据\n    _this.leftDishFlavors = []; //下拉框剩余可选择的口味数据\n    _this.vueRest = '1';\n    _this.index = 0;\n    _this.inputStyle = {\n      flex: 1\n    };\n    _this.headers = {\n      token: getToken()\n    };\n    _this.ruleForm = {\n      name: '',\n      id: '',\n      price: '',\n      code: '',\n      image: '',\n      description: '',\n      dishFlavors: [],\n      status: true,\n      categoryId: ''\n    };\n    return _this;\n  }\n  _inherits(default_1, _Vue);\n  return _createClass(default_1, [{\n    key: \"rules\",\n    get: function get() {\n      return {\n        name: [{\n          required: true,\n          validator: function validator(rule, value, callback) {\n            if (!value) {\n              callback(new Error('请输入菜品名称'));\n            } else {\n              var reg = /^([A-Za-z0-9\\u4e00-\\u9fa5]){2,20}$/;\n              if (!reg.test(value)) {\n                callback(new Error('菜品名称输入不符，请输入2-20个字符'));\n              } else {\n                callback();\n              }\n            }\n          },\n          trigger: 'blur'\n        }],\n        categoryId: [{\n          required: true,\n          message: '请选择菜品分类',\n          trigger: 'change'\n        }],\n        image: {\n          required: true,\n          message: '菜品图片不能为空'\n        },\n        price: [{\n          required: true,\n          // 'message': '请填写菜品价格',\n          validator: function validator(rules, value, callback) {\n            var reg = /^([1-9]\\d{0,5}|0)(\\.\\d{1,2})?$/;\n            if (!reg.test(value) || Number(value) <= 0) {\n              callback(new Error('菜品价格格式有误，请输入大于零且最多保留两位小数的金额'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        }],\n        code: [{\n          required: true,\n          message: '请填写商品码',\n          trigger: 'blur'\n        }]\n      };\n    }\n  }, {\n    key: \"created\",\n    value: function created() {\n      this.getDishList();\n      // 口味临时数据\n      this.getFlavorListHand();\n      this.actionType = this.$route.query.id ? 'edit' : 'add';\n      if (this.$route.query.id) {\n        this.init();\n      }\n    }\n  }, {\n    key: \"mounted\",\n    value: function mounted() {}\n  }, {\n    key: \"changeDishFlavors\",\n    value: function changeDishFlavors() {\n      this.getLeftDishFlavors();\n    }\n    //过滤已选择的口味下拉框无法再次选择\n  }, {\n    key: \"getLeftDishFlavors\",\n    value: function getLeftDishFlavors() {\n      var _this2 = this;\n      var arr = [];\n      this.dishFlavorsData.map(function (item) {\n        if (_this2.dishFlavors.findIndex(function (item1) {\n          return item.name === item1.name;\n        }) === -1) {\n          arr.push(item);\n        }\n      });\n      this.leftDishFlavors = arr;\n    }\n  }, {\n    key: \"selectHandle\",\n    value: function selectHandle(val, key, ind) {\n      var arrDate = _toConsumableArray(this.dishFlavors);\n      var index = this.dishFlavorsData.findIndex(function (item) {\n        return item.name === val;\n      });\n      arrDate[key] = JSON.parse(JSON.stringify(this.dishFlavorsData[index]));\n      this.dishFlavors = arrDate;\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this3 = this;\n        return regeneratorRuntime.wrap(function (_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              queryDishById(this.$route.query.id).then(function (res) {\n                if (res && res.data && res.data.code === 1) {\n                  _this3.ruleForm = _objectSpread({}, res.data.data);\n                  _this3.ruleForm.price = String(res.data.data.price);\n                  _this3.ruleForm.status = res.data.data.status == '1';\n                  _this3.dishFlavors = res.data.data.flavors && res.data.data.flavors.map(function (obj) {\n                    return _objectSpread(_objectSpread({}, obj), {}, {\n                      value: JSON.parse(obj.value)\n                    });\n                  });\n                  var arr = [];\n                  _this3.getLeftDishFlavors();\n                  _this3.imageUrl = res.data.data.image;\n                } else {\n                  _this3.$message.error(res.data.msg);\n                }\n              });\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }() // 按钮 - 添加口味\n  }, {\n    key: \"addFlavore\",\n    value: function addFlavore() {\n      this.dishFlavors.push({\n        name: '',\n        value: []\n      }); // JSON.parse(JSON.stringify(this.dishFlavorsData))\n    }\n    // 按钮 - 删除口味\n  }, {\n    key: \"delFlavor\",\n    value: function delFlavor(name) {\n      var ind = this.dishFlavors.findIndex(function (item) {\n        return item.name === name;\n      });\n      this.dishFlavors.splice(ind, 1);\n    }\n    // 按钮 - 删除口味标签\n  }, {\n    key: \"delFlavorLabel\",\n    value: function delFlavorLabel(index, ind) {\n      this.dishFlavors[index].value.splice(ind, 1);\n    }\n    //口味位置记录\n  }, {\n    key: \"flavorPosition\",\n    value: function flavorPosition(index) {\n      this.index = index;\n    }\n    // 添加口味标签\n  }, {\n    key: \"keyDownHandle\",\n    value: function keyDownHandle(val) {\n      if (event) {\n        event.cancelBubble = true;\n        event.preventDefault();\n        event.stopPropagation();\n      }\n      if (val.target.innerText.trim() != '') {\n        this.dishFlavors[this.index].flavorData.push(val.target.innerText);\n        val.target.innerText = '';\n      }\n    }\n    // 获取菜品分类\n  }, {\n    key: \"getDishList\",\n    value: function getDishList() {\n      var _this4 = this;\n      getCategoryList({\n        type: 1\n      }).then(function (res) {\n        if (res.data.code === 1) {\n          _this4.dishList = res && res.data && res.data.data;\n        } else {\n          _this4.$message.error(res.data.msg);\n        }\n        // if (res.data.code == 200) {\n        //   const {data} = res.data\n        //   this.dishList = data\n        // } else {\n        //   this.$message.error(res.data.desc)\n        // }\n      });\n    }\n    // 获取口味列表\n  }, {\n    key: \"getFlavorListHand\",\n    value: function getFlavorListHand() {\n      // flavor flavorData\n      this.dishFlavorsData = [{\n        name: '甜味',\n        value: ['无糖', '少糖', '半糖', '多糖', '全糖']\n      }, {\n        name: '温度',\n        value: ['热饮', '常温', '去冰', '少冰', '多冰']\n      }, {\n        name: '忌口',\n        value: ['不要葱', '不要蒜', '不要香菜', '不要辣']\n      }, {\n        name: '辣度',\n        value: ['不辣', '微辣', '中辣', '重辣']\n      }];\n    }\n  }, {\n    key: \"submitForm\",\n    value: function submitForm(formName, st) {\n      var _this5 = this;\n      ;\n      this.$refs[formName].validate(function (valid) {\n        console.log(valid, 'valid');\n        if (valid) {\n          if (!_this5.ruleForm.image) return _this5.$message.error('菜品图片不能为空');\n          var params = _objectSpread({}, _this5.ruleForm);\n          // params.flavors = this.dishFlavors\n          params.status = _this5.actionType === 'add' ? 0 : _this5.ruleForm.status ? 1 : 0;\n          // params.price *= 100\n          params.categoryId = _this5.ruleForm.categoryId;\n          params.flavors = _this5.dishFlavors.map(function (obj) {\n            return _objectSpread(_objectSpread({}, obj), {}, {\n              value: JSON.stringify(obj.value)\n            });\n          });\n          delete params.dishFlavors;\n          if (_this5.actionType == 'add') {\n            delete params.id;\n            addDish(params).then(function (res) {\n              if (res.data.code === 1) {\n                _this5.$message.success('菜品添加成功！');\n                if (!st) {\n                  _this5.$router.push({\n                    path: '/dish'\n                  });\n                } else {\n                  _this5.dishFlavors = [];\n                  // this.dishFlavorsData = []\n                  _this5.imageUrl = '';\n                  _this5.ruleForm = {\n                    name: '',\n                    id: '',\n                    price: '',\n                    code: '',\n                    image: '',\n                    description: '',\n                    dishFlavors: [],\n                    status: true,\n                    categoryId: ''\n                  };\n                  _this5.restKey++;\n                }\n              } else {\n                _this5.$message.error(res.data.desc || res.data.msg);\n              }\n            }).catch(function (err) {\n              _this5.$message.error('请求出错了：' + err.message);\n            });\n          } else {\n            delete params.createTime;\n            delete params.updateTime;\n            editDish(params).then(function (res) {\n              if (res && res.data && res.data.code === 1) {\n                _this5.$router.push({\n                  path: '/dish'\n                });\n                _this5.$message.success('菜品修改成功！');\n              } else {\n                _this5.$message.error(res.data.desc || res.data.msg);\n              }\n              // if (res.data.code == 200) {\n              //   this.$router.push({'path': '/dish'})\n              //   this.$message.success('菜品修改成功！')\n              // } else {\n              //   this.$message.error(res.data.desc || res.data.message)\n              // }\n            }).catch(function (err) {\n              _this5.$message.error('请求出错了：' + err.message);\n            });\n          }\n        } else {\n          return false;\n        }\n      });\n    }\n  }, {\n    key: \"imageChange\",\n    value: function imageChange(value) {\n      this.ruleForm.image = value;\n    }\n  }]);\n}(Vue);\n__decorate([Watch('dishFlavors')], default_1.prototype, \"changeDishFlavors\", null);\ndefault_1 = __decorate([Component({\n  name: 'addShop',\n  components: {\n    HeadLable: HeadLable,\n    SelectInput: SelectInput,\n    ImageUpload: ImageUpload\n  }\n})], default_1);\nexport default default_1;",{"version":3,"names":["Component","Vue","Watch","HeadLable","SelectInput","ImageUpload","queryDishById","addDish","editDish","getCategoryList","getToken","default_1","_Vue","_this","_classCallCheck","restKey","textarea","value","imageUrl","actionType","dishList","dishFlavorsData","dishFlavors","leftDishFlavors","vueRest","index","inputStyle","flex","headers","token","ruleForm","name","id","price","code","image","description","status","categoryId","_inherits","_createClass","key","get","required","validator","rule","callback","Error","reg","test","trigger","message","rules","Number","created","getDishList","getFlavorListHand","$route","query","init","mounted","changeDishFlavors","getLeftDishFlavors","_this2","arr","map","item","findIndex","item1","push","selectHandle","val","ind","arrDate","_toConsumableArray","JSON","parse","stringify","_init","_asyncToGenerator","regeneratorRuntime","mark","_callee","_this3","wrap","_context","prev","next","then","res","data","_objectSpread","String","flavors","obj","$message","error","msg","stop","apply","arguments","addFlavore","delFlavor","splice","delFlavorLabel","flavorPosition","keyDownHandle","event","cancelBubble","preventDefault","stopPropagation","target","innerText","trim","flavorData","_this4","type","submitForm","formName","st","_this5","$refs","validate","valid","console","log","params","success","$router","path","desc","catch","err","createTime","updateTime","imageChange","__decorate","components"],"sources":["/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/views/dish/addDishtype.vue?vue&type=script&lang=ts"],"sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from 'vue-property-decorator'\nimport HeadLable from '@/components/HeadLable/index.vue'\nimport SelectInput from './components/SelectInput.vue'\nimport ImageUpload from '@/components/ImgUpload/index.vue'\n// getFlavorList口味列表暂时不做 getDishTypeList\nimport {\n  queryDishById,\n  addDish,\n  editDish,\n  getCategoryList,\n  commonDownload\n} from '@/api/dish'\nimport { baseUrl } from '@/config.json'\nimport { getToken } from '@/utils/cookies'\n@Component({\n  name: 'addShop',\n  components: {\n    HeadLable,\n    SelectInput,\n    ImageUpload\n  }\n})\nexport default class extends Vue {\n  private restKey: number = 0\n  private textarea: string = ''\n  private value: string = ''\n  private imageUrl: string = ''\n  private actionType: string = ''\n  private dishList: string[] = []\n  private dishFlavorsData: any[] = [] //原始口味数据\n  private dishFlavors: any[] = [] //待上传口味的数据\n  private leftDishFlavors: any[] = [] //下拉框剩余可选择的口味数据\n  private vueRest = '1'\n  private index = 0\n  private inputStyle = { flex: 1 }\n  private headers = {\n    token: getToken()\n  }\n  private ruleForm = {\n    name: '',\n    id: '',\n    price: '',\n    code: '',\n    image: '',\n    description: '',\n    dishFlavors: [],\n    status: true,\n    categoryId: ''\n  }\n\n  get rules() {\n    return {\n      name: [\n        {\n          required: true,\n          validator: (rule: any, value: string, callback: Function) => {\n            if (!value) {\n              callback(new Error('请输入菜品名称'))\n            } else {\n              const reg = /^([A-Za-z0-9\\u4e00-\\u9fa5]){2,20}$/\n              if (!reg.test(value)) {\n                callback(new Error('菜品名称输入不符，请输入2-20个字符'))\n              } else {\n                callback()\n              }\n            }\n          },\n          trigger: 'blur'\n        }\n      ],\n      categoryId: [\n        { required: true, message: '请选择菜品分类', trigger: 'change' }\n      ],\n      image: {\n        required: true,\n        message: '菜品图片不能为空'\n      },\n      price: [\n        {\n          required: true,\n          // 'message': '请填写菜品价格',\n          validator: (rules: any, value: string, callback: Function) => {\n            const reg = /^([1-9]\\d{0,5}|0)(\\.\\d{1,2})?$/\n            if (!reg.test(value) || Number(value) <= 0) {\n              callback(\n                new Error(\n                  '菜品价格格式有误，请输入大于零且最多保留两位小数的金额'\n                )\n              )\n            } else {\n              callback()\n            }\n          },\n          trigger: 'blur'\n        }\n      ],\n      code: [{ required: true, message: '请填写商品码', trigger: 'blur' }]\n    }\n  }\n\n  created() {\n    this.getDishList()\n    // 口味临时数据\n    this.getFlavorListHand()\n    this.actionType = this.$route.query.id ? 'edit' : 'add'\n    if (this.$route.query.id) {\n      this.init()\n    }\n  }\n\n  mounted() {}\n  @Watch('dishFlavors')\n  changeDishFlavors() {\n    this.getLeftDishFlavors()\n  }\n\n  //过滤已选择的口味下拉框无法再次选择\n  getLeftDishFlavors() {\n    let arr = []\n    this.dishFlavorsData.map(item => {\n      if (\n        this.dishFlavors.findIndex(item1 => item.name === item1.name) === -1\n      ) {\n        arr.push(item)\n      }\n    })\n    this.leftDishFlavors = arr\n  }\n\n  private selectHandle(val: any, key: any, ind: any) {\n    const arrDate = [...this.dishFlavors]\n    const index = this.dishFlavorsData.findIndex(item => item.name === val)\n    arrDate[key] = JSON.parse(JSON.stringify(this.dishFlavorsData[index]))\n    this.dishFlavors = arrDate\n  }\n\n  private async init() {\n    queryDishById(this.$route.query.id).then(res => {\n      if (res && res.data && res.data.code === 1) {\n        this.ruleForm = { ...res.data.data }\n        this.ruleForm.price = String(res.data.data.price)\n        this.ruleForm.status = res.data.data.status == '1'\n        this.dishFlavors =\n          res.data.data.flavors &&\n          res.data.data.flavors.map(obj => ({\n            ...obj,\n            value: JSON.parse(obj.value)\n          }))\n        let arr = []\n        this.getLeftDishFlavors()\n        this.imageUrl = res.data.data.image\n      } else {\n        this.$message.error(res.data.msg)\n      }\n    })\n  }\n\n  // 按钮 - 添加口味\n  private addFlavore() {\n    this.dishFlavors.push({ name: '', value: [] }) // JSON.parse(JSON.stringify(this.dishFlavorsData))\n  }\n\n  // 按钮 - 删除口味\n  private delFlavor(name: string) {\n    let ind = this.dishFlavors.findIndex(item => item.name === name)\n    this.dishFlavors.splice(ind, 1)\n  }\n\n  // 按钮 - 删除口味标签\n  private delFlavorLabel(index: number, ind: number) {\n    this.dishFlavors[index].value.splice(ind, 1)\n  }\n\n  //口味位置记录\n  private flavorPosition(index: number) {\n    this.index = index\n  }\n\n  // 添加口味标签\n  private keyDownHandle(val: any) {\n    if (event) {\n      event.cancelBubble = true\n      event.preventDefault()\n      event.stopPropagation()\n    }\n\n    if (val.target.innerText.trim() != '') {\n      this.dishFlavors[this.index].flavorData.push(val.target.innerText)\n      val.target.innerText = ''\n    }\n  }\n\n  // 获取菜品分类\n  private getDishList() {\n    getCategoryList({ type: 1 }).then(res => {\n      if (res.data.code === 1) {\n        this.dishList = res && res.data && res.data.data\n      } else {\n        this.$message.error(res.data.msg)\n      }\n      // if (res.data.code == 200) {\n      //   const {data} = res.data\n      //   this.dishList = data\n      // } else {\n      //   this.$message.error(res.data.desc)\n      // }\n    })\n  }\n\n  // 获取口味列表\n  private getFlavorListHand() {\n    // flavor flavorData\n    this.dishFlavorsData = [\n      { name: '甜味', value: ['无糖', '少糖', '半糖', '多糖', '全糖'] },\n      { name: '温度', value: ['热饮', '常温', '去冰', '少冰', '多冰'] },\n      { name: '忌口', value: ['不要葱', '不要蒜', '不要香菜', '不要辣'] },\n      { name: '辣度', value: ['不辣', '微辣', '中辣', '重辣'] }\n    ]\n  }\n\n  private submitForm(formName: any, st: any) {\n    ;(this.$refs[formName] as any).validate((valid: any) => {\n      console.log(valid, 'valid')\n      if (valid) {\n        if (!this.ruleForm.image) return this.$message.error('菜品图片不能为空')\n        let params: any = { ...this.ruleForm }\n        // params.flavors = this.dishFlavors\n        params.status =\n          this.actionType === 'add' ? 0 : this.ruleForm.status ? 1 : 0\n        // params.price *= 100\n        params.categoryId = this.ruleForm.categoryId\n        params.flavors = this.dishFlavors.map(obj => ({\n          ...obj,\n          value: JSON.stringify(obj.value)\n        }))\n        delete params.dishFlavors\n        if (this.actionType == 'add') {\n          delete params.id\n          addDish(params)\n            .then(res => {\n              if (res.data.code === 1) {\n                this.$message.success('菜品添加成功！')\n                if (!st) {\n                  this.$router.push({ path: '/dish' })\n                } else {\n                  this.dishFlavors = []\n                  // this.dishFlavorsData = []\n                  this.imageUrl = ''\n                  this.ruleForm = {\n                    name: '',\n                    id: '',\n                    price: '',\n                    code: '',\n                    image: '',\n                    description: '',\n                    dishFlavors: [],\n                    status: true,\n                    categoryId: ''\n                  }\n                  this.restKey++\n                }\n              } else {\n                this.$message.error(res.data.desc || res.data.msg)\n              }\n            })\n            .catch(err => {\n              this.$message.error('请求出错了：' + err.message)\n            })\n        } else {\n          delete params.createTime\n          delete params.updateTime\n          editDish(params)\n            .then(res => {\n              if (res && res.data && res.data.code === 1) {\n                this.$router.push({ path: '/dish' })\n                this.$message.success('菜品修改成功！')\n              } else {\n                this.$message.error(res.data.desc || res.data.msg)\n              }\n              // if (res.data.code == 200) {\n              //   this.$router.push({'path': '/dish'})\n              //   this.$message.success('菜品修改成功！')\n              // } else {\n              //   this.$message.error(res.data.desc || res.data.message)\n              // }\n            })\n            .catch(err => {\n              this.$message.error('请求出错了：' + err.message)\n            })\n        }\n      } else {\n        return false\n      }\n    })\n  }\n\n  imageChange(value: any) {\n    this.ruleForm.image = value\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}